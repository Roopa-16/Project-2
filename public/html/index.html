<!DOCTYPE html>

<head>
  <title>Welcome to SLR</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css'
    integrity='sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T' crossorigin='anonymous'>
  <!-- BootStrap jQuery -->
  <script src='https://code.jquery.com/jquery-3.3.1.slim.min.js'
    integrity='sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo'
    crossorigin='anonymous'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js'
    integrity='sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1'
    crossorigin='anonymous'></script>
  <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js'
    integrity='sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM'
    crossorigin='anonymous'></script>
  <!-- Ajax -->
  <script src='https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.0.min.js'></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.0.0/lumen/bootstrap.min.css" />
  <!-- Firebase -->
  <script src='https://www.gstatic.com/firebasejs/4.12.0/firebase.js'></script>
  <link rel="stylesheet" href="../styles/index.css">
</head>

<body>
  <div id="container">
    <div class="jumbotron">
      <h1 class="display-4">Welcome to SLR</h1>
      <p class="lead">We are here to help any and every college student! We want to be able to assist students who need
        help but
        do not have enough moolah to pay for it. In order to do so you can earn credits by helping out other students
        with any level of expertise you may have.

      </p>
      <hr class="my-4">
      <p>Get started by creating an account or logging in</p>
      <a class="btn btn-light btn-lg" href="/signIn" role="button">Sign In </a>
      <a class="btn btn-light btn-lg" href="/signUp" role="button">Sign up </a>
      <a class="btn btn-light btn-lg" id="signOut" role="button">Sign Out </a>
      <a class="btn btn-light btn-lg" id="post" role="button">Post </a>
    </div>

    <h2>Modal Login Form</h2>

    <button onclick="document.getElementById('id01').style.display='block'" style="width:auto;">Login</button>

    <div id="id01" class="modal">

      <form class="modal-content animate" action="/action_page.php" method="post">
        <div class="imgcontainer">
          <span onclick="document.getElementById('id01').style.display='none'" class="close"
            title="Close Modal">&times;</span>
          <img src="Logo.png" alt="Avatar" class="avatar">
        </div>

        <div class="container">
          <label for="uname"><b>Username</b></label>
          <input type="text" placeholder="Enter Username" name="uname" required>

          <label for="psw"><b>Password</b></label>
          <input type="password" placeholder="Enter Password" name="psw" required>

          <button type="submit">Login</button>
          <label>
            <input type="checkbox" checked="checked" name="remember"> Remember me
          </label>
        </div>

        <div class="container" style="background-color:#f1f1f1">
          <button type="button" onclick="document.getElementById('id01').style.display='none'"
            class="cancelbtn">Cancel</button>
          <span class="psw">Forgot <a href="#">password?</a></span>
        </div>
      </form>
    </div>


  </div>
  <script>
    const config = {
      apiKey: "AIzaSyB_m_T5HTRv8nJag2AiCxVKk-9ft_k0BzY",
      authDomain: "project-2-a5345.firebaseapp.com",
      databaseURL: "https://project-2-a5345.firebaseio.com",
      projectId: "project-2-a5345",
      storageBucket: "project-2-a5345.appspot.com",
      messagingSenderId: "649772621947",
      appId: "1:649772621947:web:36fce6153aa474885ec2de"
    };



    firebase.initializeApp(config);

    var database = firebase.database();

    var currentURL = window.location.origin;

    $("#accept").on("click", function () {
      console.log("accept");
      $.ajax({
        url: currentURL + "/api/accept/3/1",
        method: 'PUT'
      }).then(function (response) {
        var results = response.data;
      });
    });

    $("#post").on("click", function () {
      // var newPost = {
      //   task: $("#taskInput").val().trim(),
      //   id: $("data-id").val()
      // }
      var newPost = {
        task: "blow me",
        id: 1
      }
      $.ajax({
        headers: {
          "Content-Type": "application/json"
        },
        type: "POST",
        url: "/post/new",
        data: JSON.stringify(newPost)
      });
    });

    firebase.auth().onAuthStateChanged(fbUser => {
      if (fbUser) {
        console.log(fbUser.email);
        // $.get(currentURL + "/home");
      }
    });

    $("#signOut").on("click", function () {
      firebase.auth().signOut();
      console.log("sign out");
    });

    var modal = document.getElementById('id01');

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
  </script>
</body>

</html>